kango.Timer=function(){this._timers={};this._lastId=0};
kango.Timer.prototype={_timers:null,_lastId:0,dispose:function(){var a=kango.object.getKeys(this._timers);kango.array.forEach(a,function(a){this._clearTimer(a)},this)},_setTimer:function(a,b,d){var e=Cc["@mozilla.org/timer;1"].createInstance(Ci.nsITimer),c=++this._lastId;this._timers[c]=e;e.initWithCallback({notify:kango.func.bind(function(){d==Ci.nsITimer.TYPE_ONE_SHOT&&(this._clearTimer(c),a())},this)},b,d);return c},_clearTimer:function(a){if("undefined"!=typeof this._timers[a]){var b=this._timers[a];
delete this._timers[a];b.cancel()}},setInterval:function(a,b){return this._setTimer(a,b,Ci.nsITimer.TYPE_REPEATING_SLACK)},clearInterval:function(a){return this._clearTimer(a)},setTimeout:function(a,b){return this._setTimer(a,b,Ci.nsITimer.TYPE_ONE_SHOT)},clearTimeout:function(a){this._clearTimer(a)}};kango.registerModule(kango.getDefaultModuleRegistrar("timer",kango.Timer));
